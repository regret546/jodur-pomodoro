<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"
    />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!-- Performance optimizations -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://lottie.host" />
    <link rel="preconnect" href="https://unpkg.com" />
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com" />
    <link rel="dns-prefetch" href="https://fonts.googleapis.com" />
    <link rel="dns-prefetch" href="https://lottie.host" />
    <link rel="dns-prefetch" href="https://unpkg.com" />

    <link rel="stylesheet" href="./output.css" />
    <style>
      /* Flag icon styling */
      .flag-icon {
        display: inline-block;
        width: 1.5em;
        height: 1.125em;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        border-radius: 2px;
        vertical-align: middle;
        flex-shrink: 0;
      }

      /* Todo list animations */
      @keyframes slideInFade {
        from {
          opacity: 0;
          transform: translateX(-20px) translateY(-10px);
          max-height: 0;
          margin-bottom: 0;
          padding-top: 0;
          padding-bottom: 0;
        }
        to {
          opacity: 1;
          transform: translateX(0) translateY(0);
          max-height: 200px;
          margin-bottom: 0.5rem;
          padding-top: 0.5rem;
          padding-bottom: 0.5rem;
        }
      }

      @keyframes slideOutFade {
        from {
          opacity: 1;
          transform: translateX(0) translateY(0);
          max-height: 200px;
          margin-bottom: 0.5rem;
          padding-top: 0.5rem;
          padding-bottom: 0.5rem;
        }
        to {
          opacity: 0;
          transform: translateX(20px) translateY(-10px);
          max-height: 0;
          margin-bottom: 0;
          padding-top: 0;
          padding-bottom: 0;
        }
      }

      @keyframes strikeThrough {
        from {
          width: 0;
        }
        to {
          width: 100%;
        }
      }

      @keyframes bounce {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.7;
        }
      }

      .todo-item {
        animation: slideInFade 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        overflow: hidden;
      }

      .todo-item.removing {
        animation: slideOutFade 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        pointer-events: none;
      }

      .todo-item.completing {
        animation: bounce 0.4s ease-out;
      }

      .todo-item:hover {
        transform: translateX(4px);
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
      }

      .todo-item.dragging {
        opacity: 0.5;
        transform: rotate(2deg);
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
          0 4px 6px -2px rgba(0, 0, 0, 0.05);
      }

      .todo-item.drag-over {
        border-color: currentColor;
        transform: translateX(8px);
        background-color: rgba(var(--brand-btn-rgb, 0, 0, 0), 0.1);
      }

      .todo-checkbox:checked + .todo-text-container .todo-text {
        position: relative;
      }

      .todo-checkbox:checked + .todo-text-container .todo-text::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 0;
        width: 100%;
        height: 2px;
        background: currentColor;
        animation: strikeThrough 0.3s ease-out;
      }

      .todo-button {
        transition: all 0.2s ease-out;
      }

      .todo-button:hover {
        transform: scale(1.1);
      }

      .todo-button:active {
        transform: scale(0.95);
      }

      /* Smooth scroll for todo list */
      #todoList {
        scroll-behavior: smooth;
      }
    </style>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css"
      media="print"
      onload="this.media='all'"
    />
    <noscript
      ><link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css"
    /></noscript>
  </head>
  <body class="bg-brand-background">
    <div class="flex flex-col lg:flex-row h-screen overflow-hidden">
      <!-- Left Sidebar: World Clock (Fixed, 25% width) -->
      <aside
        clock
        class="font-extrabold bg-brand-box-background text-brand-text w-full lg:w-1/4 lg:h-screen lg:overflow-y-auto p-4 sm:p-6 order-2 lg:order-1 border-t lg:border-t-0 lg:border-r border-brand-text/10 flex flex-col"
      >
        <h2 class="text-center text-2xl sm:text-3xl 1xl:text-5xl mb-4 sm:mb-6">
          World Clock
        </h2>
        <div
          class="space-y-4 sm:space-y-5 flex flex-col items-center lg:items-start"
        >
          <div class="flex items-center justify-center lg:justify-start gap-3">
            <span
              class="flag-icon text-2xl sm:text-3xl 1xl:text-4xl"
              style="
                background-image: url('https://flagcdn.com/w40/dk.png');
                width: 1.5em;
                height: 1.125em;
              "
              aria-hidden="true"
            ></span>
            <p class="text-sm sm:text-base 1xl:text-xl whitespace-nowrap">
              DK:
              <span
                class="time inline-block w-[80px] sm:w-[100px] 1xl:w-[150px] ml-2"
                id="time-denmark"
              ></span>
            </p>
          </div>

          <div class="flex items-center justify-center lg:justify-start gap-3">
            <span
              class="flag-icon text-2xl sm:text-3xl 1xl:text-4xl"
              style="
                background-image: url('https://flagcdn.com/w40/in.png');
                width: 1.5em;
                height: 1.125em;
              "
              aria-hidden="true"
            ></span>
            <p class="text-sm sm:text-base 1xl:text-xl whitespace-nowrap">
              IN:
              <span
                class="time inline-block w-[80px] sm:w-[100px] 1xl:w-[150px] ml-2"
                id="time-india"
              ></span>
            </p>
          </div>

          <div class="flex items-center justify-center lg:justify-start gap-3">
            <span
              class="flag-icon text-2xl sm:text-3xl 1xl:text-4xl"
              style="
                background-image: url('https://flagcdn.com/w40/us.png');
                width: 1.5em;
                height: 1.125em;
              "
              aria-hidden="true"
            ></span>
            <p class="text-sm sm:text-base 1xl:text-xl whitespace-nowrap">
              US:
              <span
                class="time inline-block w-[80px] sm:w-[100px] 1xl:w-[150px] ml-2"
                id="time-us"
              ></span>
            </p>
          </div>

          <div class="flex items-center justify-center lg:justify-start gap-3">
            <span
              class="flag-icon text-2xl sm:text-3xl 1xl:text-4xl"
              style="
                background-image: url('https://flagcdn.com/w40/ph.png');
                width: 1.5em;
                height: 1.125em;
              "
              aria-hidden="true"
            ></span>
            <p class="text-sm sm:text-base 1xl:text-xl whitespace-nowrap">
              PH:
              <span
                class="time inline-block w-[80px] sm:w-[100px] 1xl:w-[150px] ml-2"
                id="time-ph"
              ></span>
            </p>
          </div>
        </div>
      </aside>

      <!-- Main Content Area: Pomodoro Timer and Todo List (75% width) -->
      <main
        class="flex-1 overflow-y-auto text-brand-text text-[1rem] order-1 lg:order-2"
      >
        <div
          class="grid grid-rows-[min-content_min-content] gap-4 sm:gap-6 p-4 sm:p-6"
        >
          <article
            pomodoro
            class="grid h-[min-content] grid-rows-[min-content_min-content]"
          >
            <div class="header text-center mb-4 sm:mb-6">
              <h1 class="font-bold text-2xl sm:text-3xl 1xl:text-5xl">
                Pomodoro
              </h1>
            </div>
            <div class="main mt-2 sm:mt-4 grid justify-items-center">
              <div
                class="w-full max-w-[95%] sm:w-max sm:max-w-none 1xl:w-[600px] grid justify-items-center gap-3 sm:gap-4 bg-brand-box-background p-3 sm:p-4 text-center rounded-md transition-colors duration-300 ease-in-out"
                id="pomoBg"
              >
                <ul
                  id="timer-modes"
                  class="flex gap-1 sm:gap-2 text-sm sm:text-base 1xl:text-3xl font-semibold flex-wrap justify-center"
                >
                  <li
                    work
                    class="cursor-pointer hover:bg-brand-btn/40 active:bg-brand-btn/60 transition-colors duration-300 px-4 py-3 sm:px-2 sm:py-1 rounded-full touch-manipulation min-h-[44px] sm:min-h-0 flex items-center justify-center"
                    onclick="renderTimer('work')"
                  >
                    Work
                  </li>
                  <li
                    shortbreak
                    class="cursor-pointer hover:bg-brand-btn/40 active:bg-brand-btn/60 transition-colors duration-300 px-4 py-3 sm:px-2 sm:py-1 rounded-full touch-manipulation min-h-[44px] sm:min-h-0 flex items-center justify-center"
                    onclick="renderTimer('shortbreak')"
                  >
                    ShortBreak
                  </li>
                  <li
                    longbreak
                    class="cursor-pointer hover:bg-brand-btn/40 active:bg-brand-btn/60 transition-colors duration-300 px-4 py-3 sm:px-2 sm:py-1 rounded-full touch-manipulation min-h-[44px] sm:min-h-0 flex items-center justify-center"
                    onclick="renderTimer('longbreak')"
                  >
                    LongBreak
                  </li>
                </ul>
                <div
                  class="time font-bold text-3xl sm:text-4xl 1xl:text-6xl min-h-[3rem] sm:min-h-0 flex items-center justify-center"
                  id="timer"
                >
                  25:00
                </div>
                <div
                  class="relative size-[80px] sm:size-[100px] 1xl:size-[200px] overflow-hidden"
                >
                  <!-- First Lottie -->
                  <dotlottie-wc
                    id="lottie1"
                    src="https://lottie.host/8eb3e96f-c4b9-46d5-abeb-24af5e8d452d/XD0QJ1x6kD.lottie"
                    class="absolute inset-0 transition-transform duration-700 ease-in-out translate-x-0"
                    autoplay
                    loop
                  ></dotlottie-wc>

                  <!-- Second Lottie (hidden at start) -->
                  <dotlottie-wc
                    id="lottie2"
                    src="https://lottie.host/a7257c72-06b3-4262-bd80-d8f2addb4b39/lBBYzll5gc.lottie"
                    class="absolute inset-0 transition-transform duration-700 ease-in-out translate-x-full"
                    autoplay
                    loop
                  ></dotlottie-wc>
                </div>
                <div
                  class="relative w-full flex items-center justify-center gap-3 sm:gap-4"
                >
                  <button
                    class="cursor-pointer bg-brand-btn/70 border-t-2 border-r-2 1xl:border-r-4 border-l-2 1xl:border-l-4 border-b-5 1xl:border-b-6 border-brand-text text-brand-text font-semibold px-6 py-3 sm:px-5 sm:py-2 1xl:px-10 1xl:py-4 rounded-lg hover:bg-brand-btn/40 active:bg-brand-btn/50 transition-colors duration-300 touch-manipulation min-h-[48px] min-w-[48px] sm:min-h-0 sm:min-w-0"
                    id="startButton"
                    aria-label="Start/Pause timer"
                  >
                    <i class="fa-solid fa-play text-lg sm:text-base"></i>
                  </button>

                  <div
                    class="flex gap-4 sm:gap-3 text-xl sm:text-lg 1xl:text-2xl"
                  >
                    <i
                      class="fa-solid fa-gear cursor-pointer hover:opacity-80 active:opacity-60 touch-manipulation min-w-[48px] min-h-[48px] sm:min-w-0 sm:min-h-0 flex items-center justify-center"
                      id="gearIcon"
                      aria-label="Settings"
                    ></i>
                    <i
                      class="fa-solid fa-rotate-right cursor-pointer hover:opacity-80 active:opacity-60 touch-manipulation min-w-[48px] min-h-[48px] sm:min-w-0 sm:min-h-0 flex items-center justify-center"
                      id="resetButton"
                      aria-label="Reset timer"
                    ></i>
                  </div>
                </div>
              </div>
            </div>
          </article>

          <article
            todo
            class="grid h-[min-content] grid-rows-[min-content_min-content]"
          >
            <div class="header mt-4 sm:mt-6 text-center">
              <h2 class="font-bold text-xl sm:text-2xl 1xl:text-5xl">
                Todo List
              </h2>
            </div>
            <div class="main mt-2 sm:mt-4 grid justify-items-center">
              <div
                class="w-full max-w-[95%] sm:w-max sm:max-w-none 1xl:w-[600px] bg-brand-box-background p-3 sm:p-4 rounded-md"
              >
                <div class="flex gap-2 mb-3 sm:mb-4">
                  <input
                    type="text"
                    id="todoInput"
                    placeholder="Add a new task..."
                    class="flex-1 bg-brand-background text-brand-text border-2 border-brand-btn/50 rounded-md px-3 py-2 sm:px-4 sm:py-2 text-sm sm:text-base focus:outline-none focus:border-brand-btn transition-colors duration-300"
                  />
                  <button
                    id="addTodoBtn"
                    class="bg-brand-btn/70 border-t-2 border-r-2 1xl:border-r-4 border-l-2 1xl:border-l-4 border-b-5 1xl:border-b-6 border-brand-text text-brand-text font-semibold px-4 py-2 sm:px-5 sm:py-2 1xl:px-8 1xl:py-3 rounded-lg hover:bg-brand-btn/40 active:bg-brand-btn/50 transition-colors duration-300 touch-manipulation min-h-[48px] min-w-[48px] sm:min-h-0 sm:min-w-0 flex items-center justify-center"
                    aria-label="Add todo"
                  >
                    <i class="fa-solid fa-plus text-lg sm:text-base"></i>
                  </button>
                </div>
                <ul
                  id="todoList"
                  class="space-y-2 sm:space-y-3 max-h-[400px] overflow-y-auto"
                >
                  <!-- Todos will be added here dynamically -->
                </ul>
                <div
                  id="emptyState"
                  class="text-center text-brand-text/60 py-4 sm:py-6 text-sm sm:text-base hidden"
                >
                  <i
                    class="fa-solid fa-clipboard-list text-2xl sm:text-3xl mb-2"
                  ></i>
                  <p>No tasks yet. Add one above!</p>
                </div>
              </div>
            </div>
          </article>
        </div>
      </main>
    </div>
  </body>
  <script src="./js/helpers.js"></script>
  <script src="./js/pomodoro.js" defer></script>
  <script type="module" src="./js/pomoSettings.js" defer></script>
  <script src="./js/clocks.js" defer></script>
  <script src="./js/todo.js" defer></script>
  <script
    src="https://unpkg.com/@lottiefiles/dotlottie-wc@0.6.2/dist/dotlottie-wc.js"
    type="module"
    defer
  ></script>
</html>
